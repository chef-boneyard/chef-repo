# This config file is auto-generated by chef
# please don't modify manually

DAEMON="<%= @daemon_path %>"
NAME="<%= @name %>"

DAEMON_OPTS=""

<% if @bind_ip -%>
DAEMON_OPTS="$DAEMON_OPTS --bind_ip <%= @bind_ip %>"
<% end -%>
<%= @port ? "DAEMON_OPTS=\"$DAEMON_OPTS --port #{@port}\"" : "" %>
<%= @dbpath ? "DAEMON_OPTS=\"$DAEMON_OPTS --dbpath #{@dbpath}\"" : "" %>
<%= @logpath ? "DAEMON_OPTS=\"$DAEMON_OPTS --logpath #{@logpath}\"" : "" %>

<%= @config ? "DAEMON_OPTS=\"$DAEMON_OPTS --config #{@config}\"" : "" %>
<%= @configdb ? "DAEMON_OPTS=\"$DAEMON_OPTS --configdb #{@configdb}\"" : "" %>

<%= @configsrv ? "DAEMON_OPTS=\"$DAEMON_OPTS --configsvr\"" : "" %>
<%= @shardsrv ? "DAEMON_OPTS=\"$DAEMON_OPTS --shardsvr\"" : "" %>

<%= @nojournal ? "DAEMON_OPTS=\"$DAEMON_OPTS --nojournal\"" : "" %>

<% if node[:mongodb][:pidfilepath] %>
pidfilepath=<%= node[:mongodb][:pidfilepath] %>
<% end %>

<% if @replicaset_name %>
DAEMON_OPTS="$DAEMON_OPTS --replSet <%= @replicaset_name %>"
<% end %>

<% if node[:mongodb][:key_file] %>
DAEMON_OPTS="$DAEMON_OPTS --keyFile /etc/mongodb.key"
<% end %>

<% if @enable_rest %>
DAEMON_OPTS="$DAEMON_OPTS --rest"
<% end %>

<% if @smallfiles %>
DAEMON_OPTS="$DAEMON_OPTS --smallfiles"
<% end %>

<% if %w( rhel fedora ).include? node.platform_family -%>
DAEMON_OPTS="$DAEMON_OPTS --fork"
DBPATH="<%= @dbpath %>"
<% end -%>
