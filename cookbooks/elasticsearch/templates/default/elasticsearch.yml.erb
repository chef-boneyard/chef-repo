<% if @aws -%>
cloud: 
  account: <%= @aws['aws_access_key_id'] %>
  key: <%= @aws['aws_secret_access_key'] %>
  type: amazon
<% end -%>

path:
  work: <%= @node["elasticsearch"]["path_work"] %>
  logs: <%= @node["elasticsearch"]["path_logs"] %>
  data: <%= @node[:elasticsearch][:datadir] %>

cluster:
  name: <%= @node[:elasticsearch][:cluster_name] %>

gateway:
<% if @aws && @node[:elasticsearch][:s3_gateway_bucket]-%>
  type: cloud
  cloud:
    container: <%= @node[:elasticsearch][:s3_gateway_bucket] %>
    chunk_size: 1g # workaround for bug where chunk size is limited to 2g but default is 4g
<% else -%>
  type: fs
  fs:
    location: <%= @node[:elasticsearch][:gateway_fs_location] %>
<% end -%>
  recover_after_nodes: <%= @node[:elasticserach][:recovery_after_nodes] %>
  recover_after_time: 5m
  expected_nodes: 2

index:
  number_of_shards: <%= @node[:elasticsearch][:default_shards] %>
  number_of_replicas: <%= @node[:elasticsearch][:default_replicas] %>

http:
  enabled: <%= @node[:elasticsearch][:http_enabled] %>
node:
  data: <%= @node[:elasticsearch][:node_data] %>
